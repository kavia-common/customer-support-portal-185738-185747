{"is_source_file": true, "format": "Python", "description": "This source file defines API endpoints related to authentication, including user registration, login, and fetching current user info. It uses FastAPI framework, Pydantic models, and interacts with database models and security utilities.", "external_files": ["src.core.security", "src.db.models", "src.db.session"], "external_methods": ["create_access_token", "get_password_hash", "verify_password", "get_current_user"], "published": ["TokenResponse", "register_user", "login", "me"], "classes": [{"name": "TokenResponse", "description": "Data model for the JWT token response, including access token and token type."}, {"name": "RegisterRequest", "description": "Data model for user registration request, including email, name, password, and role indicator."}], "methods": [{"name": "register_user(payload: RegisterRequest, db: Session = Depends(get_db))", "description": "Endpoint to register a new user, generate and return a JWT token.", "scope": "", "scopeKind": ""}, {"name": "login(form_data: OAuth2PasswordRequestForm = Depends(), db: Session = Depends(get_db))", "description": "Endpoint to authenticate user and return a JWT token.", "scope": "", "scopeKind": ""}, {"name": "me(user: User = Depends(get_current_user))", "description": "Endpoint to retrieve current authenticated user information.", "scope": "", "scopeKind": ""}], "calls": ["db.query", "db.add", "db.commit", "db.refresh", "create_access_token", "get_password_hash", "verify_password", "get_current_user"], "search-terms": ["auth API endpoints", "JWT token generation", "FastAPI authentication", "user registration", "user login", "current user profile"], "state": 2, "file_id": 10, "knowledge_revision": 23, "git_revision": "", "ctags": [{"_type": "tag", "name": "RegisterRequest", "path": "/home/kavia/workspace/code-generation/customer-support-portal-185738-185747/customer_service_backend/src/api/routers_auth.py", "pattern": "/^class RegisterRequest(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TokenResponse", "path": "/home/kavia/workspace/code-generation/customer-support-portal-185738-185747/customer_service_backend/src/api/routers_auth.py", "pattern": "/^class TokenResponse(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "access_token", "path": "/home/kavia/workspace/code-generation/customer-support-portal-185738-185747/customer_service_backend/src/api/routers_auth.py", "pattern": "/^    access_token: str = Field(..., description=\"JWT access token\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "TokenResponse", "scopeKind": "class"}, {"_type": "tag", "name": "email", "path": "/home/kavia/workspace/code-generation/customer-support-portal-185738-185747/customer_service_backend/src/api/routers_auth.py", "pattern": "/^    email: EmailStr = Field(..., description=\"Email for login\")$/", "language": "Python", "typeref": "typename:EmailStr", "kind": "variable", "scope": "RegisterRequest", "scopeKind": "class"}, {"_type": "tag", "name": "full_name", "path": "/home/kavia/workspace/code-generation/customer-support-portal-185738-185747/customer_service_backend/src/api/routers_auth.py", "pattern": "/^    full_name: Optional[str] = Field(None, description=\"Full name\")$/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "RegisterRequest", "scopeKind": "class"}, {"_type": "tag", "name": "is_agent", "path": "/home/kavia/workspace/code-generation/customer-support-portal-185738-185747/customer_service_backend/src/api/routers_auth.py", "pattern": "/^    is_agent: bool = Field(False, description=\"Set true to register as agent\")$/", "language": "Python", "typeref": "typename:bool", "kind": "variable", "scope": "RegisterRequest", "scopeKind": "class"}, {"_type": "tag", "name": "login", "path": "/home/kavia/workspace/code-generation/customer-support-portal-185738-185747/customer_service_backend/src/api/routers_auth.py", "pattern": "/^def login(form_data: OAuth2PasswordRequestForm = Depends(), db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(form_data: OAuth2PasswordRequestForm = Depends(), db: Session = Depends(get_db))"}, {"_type": "tag", "name": "me", "path": "/home/kavia/workspace/code-generation/customer-support-portal-185738-185747/customer_service_backend/src/api/routers_auth.py", "pattern": "/^def me(user: User = Depends(get_current_user)):$/", "language": "Python", "kind": "function", "signature": "(user: User = Depends(get_current_user))"}, {"_type": "tag", "name": "password", "path": "/home/kavia/workspace/code-generation/customer-support-portal-185738-185747/customer_service_backend/src/api/routers_auth.py", "pattern": "/^    password: str = Field(..., min_length=6, description=\"Password\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "RegisterRequest", "scopeKind": "class"}, {"_type": "tag", "name": "register_user", "path": "/home/kavia/workspace/code-generation/customer-support-portal-185738-185747/customer_service_backend/src/api/routers_auth.py", "pattern": "/^def register_user(payload: RegisterRequest, db: Session = Depends(get_db)):$/", "language": "Python", "kind": "function", "signature": "(payload: RegisterRequest, db: Session = Depends(get_db))"}, {"_type": "tag", "name": "router", "path": "/home/kavia/workspace/code-generation/customer-support-portal-185738-185747/customer_service_backend/src/api/routers_auth.py", "pattern": "/^router = APIRouter(prefix=\"\\/auth\", tags=[\"auth\"])$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "token_type", "path": "/home/kavia/workspace/code-generation/customer-support-portal-185738-185747/customer_service_backend/src/api/routers_auth.py", "pattern": "/^    token_type: str = Field(\"bearer\", description=\"Token type\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "TokenResponse", "scopeKind": "class"}], "hash": "9f9e983feaeb45a491fa6f80b2b738fc", "format-version": 4, "code-base-name": "customer_service_backend", "filename": "customer_service_backend/src/api/routers_auth.py", "fields": [{"name": "str access_token", "scope": "TokenResponse", "scopeKind": "class", "description": "unavailable"}, {"name": "EmailStr email", "scope": "RegisterRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] full_name", "scope": "RegisterRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "bool is_agent", "scope": "RegisterRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "str password", "scope": "RegisterRequest", "scopeKind": "class", "description": "unavailable"}, {"name": "router = APIRouter(prefix=\"\\/auth\", tags=[\"auth\"])", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "str token_type", "scope": "TokenResponse", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"23": ""}]}