{"is_source_file": true, "format": "Python", "description": "This file contains test cases for the messaging and ticket system in a customer support backend API, using FastAPI's TestClient for testing endpoint behaviors and authorization logic.", "external_files": ["fastapi.testclient"], "external_methods": [], "published": [], "classes": [], "methods": [{"name": "_me(client: TestClient, token: str)", "description": "Helper function to get the current user info using an authenticated client.", "scope": "", "scopeKind": ""}, {"name": "_create_ticket(client: TestClient, token: str)", "description": "Helper function to create a new support ticket for testing purposes.", "scope": "", "scopeKind": ""}, {"name": "test_customer_can_post_to_own_ticket(client: TestClient)", "description": "Test to ensure a customer can successfully post a message to their own ticket.", "scope": "", "scopeKind": ""}, {"name": "test_customer_cannot_post_to_others_ticket(client: TestClient)", "description": "Test to verify that a customer cannot post a message to someone else's ticket, expecting a 403 Forbidden response.", "scope": "", "scopeKind": ""}, {"name": "test_cannot_post_as_another_user(client: TestClient)", "description": "Test to check that users cannot post messages on behalf of other users, expecting a 403 Forbidden.", "scope": "", "scopeKind": ""}, {"name": "test_agent_can_post_and_list_any_ticket(client: TestClient)", "description": "Test to verify agents can post messages to any ticket and list all messages for that ticket.", "scope": "", "scopeKind": ""}, {"name": "test_customer_cannot_list_others_messages(client: TestClient)", "description": "Test to confirm that a customer cannot access messages of another customer's ticket, expecting a 403 response.", "scope": "", "scopeKind": ""}], "calls": ["client.post", "client.get", "_me", "_create_ticket"], "search-terms": ["test_messages", "FastAPI", "customer support", "tickets", "messages", "authorization", "403", "endpoint testing", "message posting"], "state": 2, "file_id": 20, "knowledge_revision": 50, "git_revision": "", "ctags": [{"_type": "tag", "name": "_create_ticket", "path": "/home/kavia/workspace/code-generation/customer-support-portal-185738-185747/customer_service_backend/src/tests/test_messages.py", "pattern": "/^def _create_ticket(client: TestClient, token: str):$/", "language": "Python", "kind": "function", "signature": "(client: TestClient, token: str)"}, {"_type": "tag", "name": "_me", "path": "/home/kavia/workspace/code-generation/customer-support-portal-185738-185747/customer_service_backend/src/tests/test_messages.py", "pattern": "/^def _me(client: TestClient, token: str):$/", "language": "Python", "kind": "function", "signature": "(client: TestClient, token: str)"}, {"_type": "tag", "name": "test_agent_can_post_and_list_any_ticket", "path": "/home/kavia/workspace/code-generation/customer-support-portal-185738-185747/customer_service_backend/src/tests/test_messages.py", "pattern": "/^def test_agent_can_post_and_list_any_ticket(client: TestClient):$/", "language": "Python", "kind": "function", "signature": "(client: TestClient)"}, {"_type": "tag", "name": "test_cannot_post_as_another_user", "path": "/home/kavia/workspace/code-generation/customer-support-portal-185738-185747/customer_service_backend/src/tests/test_messages.py", "pattern": "/^def test_cannot_post_as_another_user(client: TestClient):$/", "language": "Python", "kind": "function", "signature": "(client: TestClient)"}, {"_type": "tag", "name": "test_customer_can_post_to_own_ticket", "path": "/home/kavia/workspace/code-generation/customer-support-portal-185738-185747/customer_service_backend/src/tests/test_messages.py", "pattern": "/^def test_customer_can_post_to_own_ticket(client: TestClient):$/", "language": "Python", "kind": "function", "signature": "(client: TestClient)"}, {"_type": "tag", "name": "test_customer_cannot_list_others_messages", "path": "/home/kavia/workspace/code-generation/customer-support-portal-185738-185747/customer_service_backend/src/tests/test_messages.py", "pattern": "/^def test_customer_cannot_list_others_messages(client: TestClient):$/", "language": "Python", "kind": "function", "signature": "(client: TestClient)"}, {"_type": "tag", "name": "test_customer_cannot_post_to_others_ticket", "path": "/home/kavia/workspace/code-generation/customer-support-portal-185738-185747/customer_service_backend/src/tests/test_messages.py", "pattern": "/^def test_customer_cannot_post_to_others_ticket(client: TestClient):$/", "language": "Python", "kind": "function", "signature": "(client: TestClient)"}], "hash": "e80ed3f9addec0346c4bad1723c436c1", "format-version": 4, "code-base-name": "customer_service_backend", "filename": "customer_service_backend/src/tests/test_messages.py", "revision_history": [{"50": ""}]}