{"is_source_file": true, "format": "Python", "description": "Test suite for customer support ticket system API endpoints, verifying role-based access control, ticket creation, listing, retrieval, and update functionalities using FastAPI's TestClient.", "external_files": ["fastapi.testclient import TestClient"], "external_methods": ["_me", "client.post", "client.get", "client.put"], "published": ["test_customer_create_own_ticket", "test_customer_cannot_create_for_other", "test_list_tickets_customer_sees_only_own", "test_agent_sees_all_tickets", "test_get_ticket_rbac", "test_update_ticket_customer_limits_and_agent_privileges"], "classes": [], "methods": [{"name": "_me(client: TestClient, token: str)", "description": "Helper function to fetch authenticated user's profile information using the provided test client and token.", "scope": "", "scopeKind": ""}, {"name": "test_customer_create_own_ticket(client: TestClient)", "description": "Tests that a customer user can successfully create a ticket and the ticket's properties are correct.", "scope": "", "scopeKind": ""}, {"name": "test_customer_cannot_create_for_other(client: TestClient)", "description": "Ensures a customer cannot create a ticket for another user's ID, expecting a 403 Forbidden response.", "scope": "", "scopeKind": ""}, {"name": "test_list_tickets_customer_sees_only_own(client: TestClient)", "description": "Validates that a customer only sees their own tickets when listing, with tickets properly filtered.", "scope": "", "scopeKind": ""}, {"name": "test_agent_sees_all_tickets(client: TestClient)", "description": "Checks that an agent user can see all tickets regardless of creator.", "scope": "", "scopeKind": ""}, {"name": "test_get_ticket_rbac(client: TestClient)", "description": "Verifies role-based access: owners can retrieve their tickets, others get forbidden, agents can access any ticket.", "scope": "", "scopeKind": ""}, {"name": "test_update_ticket_customer_limits_and_agent_privileges(client: TestClient)", "description": "Tests ticket update permissions: customers can update title/description but not status, while agents can update status and other fields.", "scope": "", "scopeKind": ""}], "calls": ["client.post", "client.get", "client.put", "_me(client, token)"], "search-terms": ["test_tickets", "FastAPI", "ticket", "RBAC", "ticket creation", "listing tickets", "ticket retrieval", "ticket update", "role-based access control", "customer support API tests"], "state": 2, "file_id": 19, "knowledge_revision": 48, "git_revision": "", "ctags": [{"_type": "tag", "name": "_me", "path": "/home/kavia/workspace/code-generation/customer-support-portal-185738-185747/customer_service_backend/src/tests/test_tickets.py", "pattern": "/^def _me(client: TestClient, token: str):$/", "language": "Python", "kind": "function", "signature": "(client: TestClient, token: str)"}, {"_type": "tag", "name": "test_agent_sees_all_tickets", "path": "/home/kavia/workspace/code-generation/customer-support-portal-185738-185747/customer_service_backend/src/tests/test_tickets.py", "pattern": "/^def test_agent_sees_all_tickets(client: TestClient):$/", "language": "Python", "kind": "function", "signature": "(client: TestClient)"}, {"_type": "tag", "name": "test_customer_cannot_create_for_other", "path": "/home/kavia/workspace/code-generation/customer-support-portal-185738-185747/customer_service_backend/src/tests/test_tickets.py", "pattern": "/^def test_customer_cannot_create_for_other(client: TestClient):$/", "language": "Python", "kind": "function", "signature": "(client: TestClient)"}, {"_type": "tag", "name": "test_customer_create_own_ticket", "path": "/home/kavia/workspace/code-generation/customer-support-portal-185738-185747/customer_service_backend/src/tests/test_tickets.py", "pattern": "/^def test_customer_create_own_ticket(client: TestClient):$/", "language": "Python", "kind": "function", "signature": "(client: TestClient)"}, {"_type": "tag", "name": "test_get_ticket_rbac", "path": "/home/kavia/workspace/code-generation/customer-support-portal-185738-185747/customer_service_backend/src/tests/test_tickets.py", "pattern": "/^def test_get_ticket_rbac(client: TestClient):$/", "language": "Python", "kind": "function", "signature": "(client: TestClient)"}, {"_type": "tag", "name": "test_list_tickets_customer_sees_only_own", "path": "/home/kavia/workspace/code-generation/customer-support-portal-185738-185747/customer_service_backend/src/tests/test_tickets.py", "pattern": "/^def test_list_tickets_customer_sees_only_own(client: TestClient):$/", "language": "Python", "kind": "function", "signature": "(client: TestClient)"}, {"_type": "tag", "name": "test_update_ticket_customer_limits_and_agent_privileges", "path": "/home/kavia/workspace/code-generation/customer-support-portal-185738-185747/customer_service_backend/src/tests/test_tickets.py", "pattern": "/^def test_update_ticket_customer_limits_and_agent_privileges(client: TestClient):$/", "language": "Python", "kind": "function", "signature": "(client: TestClient)"}], "hash": "4c2fcd26cb630589cf0a5e4fe8363d8d", "format-version": 4, "code-base-name": "customer_service_backend", "filename": "customer_service_backend/src/tests/test_tickets.py", "revision_history": [{"48": ""}]}